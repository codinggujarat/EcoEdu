{% extends "base.html" %}

{% block title %}Neural Analytics | EcoEdu Intelligence{% endblock %}

{% block content %}
<!-- Ambient Background Effects -->
<div class="fixed inset-0 overflow-hidden pointer-events-none -z-10">
    <div
        class="absolute top-0 left-0 w-[500px] h-[500px] bg-emerald-500/5 rounded-full filter blur-[120px] animate-pulse">
    </div>
    <div class="absolute bottom-0 right-0 w-[400px] h-[400px] bg-emerald-500/5 rounded-full filter blur-[120px] animate-pulse"
        style="animation-delay: 2s;"></div>
    <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[radial-gradient(#ffffff03_1px,transparent_1px)] [background-size:40px_40px]">
    </div>
</div>

<div class="max-w-7xl mx-auto px-6 py-24 relative">
    <!-- Header Section -->
    <div class="text-center mb-16 relative">
        <div class="flex justify-center mb-8">
            <div class="relative group">
                <div
                    class="absolute inset-0 bg-emerald-500 blur-2xl opacity-20 group-hover:opacity-40 transition-opacity duration-500">
                </div>
                <div
                    class="relative w-24 h-24 bg-[#0a0a0a] border border-emerald-500/30 rounded-3xl flex items-center justify-center shadow-2xl overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent"></div>
                    <i class="fas fa-microchip text-emerald-500 text-4xl"></i>
                </div>
                <div
                    class="absolute -top-3 -right-3 w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-emerald-500/40 animate-bounce">
                    <i class="fas fa-crown text-black text-sm"></i>
                </div>
            </div>
        </div>
        <h1 class="text-5xl md:text-7xl font-black text-white tracking-tighter mb-6 uppercase">
            Neural <span class="text-emerald-500 text-glow-emerald">Analytics</span>
        </h1>
        <p class="text-gray-500 font-bold text-xs uppercase tracking-[0.4em] max-w-2xl mx-auto leading-relaxed">
            Real-time heuristic monitoring and global environmental impact synthesis.
        </p>
    </div>

    <!-- Key Metrics Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
        <!-- Active Population -->
        <div
            class="stat-card p-8 rounded-[2.5rem] relative overflow-hidden group hover:-translate-y-2 transition-all duration-500 hover:shadow-emerald-500/10 shadow-2xl shadow-black">
            <div
                class="absolute top-0 right-0 p-8 text-emerald-500/5 group-hover:text-emerald-500/10 transition-colors">
                <i class="fas fa-users-viewfinder text-6xl"></i>
            </div>
            <div class="relative z-10">
                <div
                    class="w-12 h-12 bg-emerald-500/10 rounded-2xl flex items-center justify-center border border-emerald-500/20 mb-6">
                    <i class="fas fa-users text-emerald-500 text-xl"></i>
                </div>
                <div class="space-y-1">
                    <p class="text-[10px] text-gray-600 font-black uppercase tracking-widest leading-none mb-2">Active
                        Population</p>
                    <p class="text-4xl font-black text-white tracking-tighter" id="total-users">0</p>
                    <div class="pt-4 flex items-center gap-2 text-emerald-500 text-[10px] font-black uppercase">
                        <i class="fas fa-arrow-trend-up"></i>
                        <span>+12% Expansion</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Energy Core Synthesis -->
        <div
            class="stat-card p-8 rounded-[2.5rem] relative overflow-hidden group hover:-translate-y-2 transition-all duration-500 hover:shadow-blue-500/10 shadow-2xl shadow-black border-blue-500/5 hover:border-blue-500/20">
            <div class="absolute top-0 right-0 p-8 text-blue-500/5 group-hover:text-blue-500/10 transition-colors">
                <i class="fas fa-atom text-6xl"></i>
            </div>
            <div class="relative z-10">
                <div
                    class="w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center border border-blue-500/20 mb-6">
                    <i class="fas fa-bolt text-blue-500 text-xl"></i>
                </div>
                <div class="space-y-1">
                    <p class="text-[10px] text-gray-600 font-black uppercase tracking-widest leading-none mb-2">Core
                        Generation</p>
                    <p class="text-4xl font-black text-white tracking-tighter" id="total-points">0</p>
                    <div class="pt-4 flex items-center gap-2 text-blue-500 text-[10px] font-black uppercase">
                        <i class="fas fa-bolt-lightning"></i>
                        <span>+8% Production</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Operation Success -->
        <div
            class="stat-card p-8 rounded-[2.5rem] relative overflow-hidden group hover:-translate-y-2 transition-all duration-500 hover:shadow-yellow-500/10 shadow-2xl shadow-black border-yellow-500/5 hover:border-yellow-500/20">
            <div class="absolute top-0 right-0 p-8 text-yellow-500/5 group-hover:text-yellow-500/10 transition-colors">
                <i class="fas fa-clipboard-check text-6xl"></i>
            </div>
            <div class="relative z-10">
                <div
                    class="w-12 h-12 bg-yellow-500/10 rounded-2xl flex items-center justify-center border border-yellow-500/20 mb-6">
                    <i class="fas fa-list-check text-yellow-500 text-xl"></i>
                </div>
                <div class="space-y-1">
                    <p class="text-[10px] text-gray-600 font-black uppercase tracking-widest leading-none mb-2">Ops
                        Completed</p>
                    <p class="text-4xl font-black text-white tracking-tighter" id="challenges-completed">0</p>
                    <div class="pt-4 flex items-center gap-2 text-yellow-500 text-[10px] font-black uppercase">
                        <i class="fas fa-gears"></i>
                        <span>+23% Efficiency</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Impact Magnitude -->
        <div
            class="stat-card p-8 rounded-[2.5rem] relative overflow-hidden group hover:-translate-y-2 transition-all duration-500 bg-emerald-500 shadow-xl shadow-emerald-500/20 border-none group">
            <div class="absolute top-0 right-0 p-8 text-black/5 group-hover:text-black/10 transition-colors">
                <i class="fas fa-earth-americas text-6xl"></i>
            </div>
            <div class="relative z-10">
                <div
                    class="w-12 h-12 bg-black/10 rounded-2xl flex items-center justify-center border border-black/5 mb-6">
                    <i class="fas fa-leaf text-black text-xl"></i>
                </div>
                <div class="space-y-1">
                    <p class="text-[10px] text-black/40 font-black uppercase tracking-widest leading-none mb-2">Impact
                        Magnitude</p>
                    <p class="text-4xl font-black text-black tracking-tighter" id="co2-saved">0</p>
                    <div class="pt-4 flex items-center gap-2 text-black/60 text-[10px] font-black uppercase">
                        <i class="fas fa-shield-heart"></i>
                        <span>+15% Capture</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Hub -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16">
        <!-- Growth Projection -->
        <div class="stat-card p-10 rounded-[3.5rem] relative overflow-hidden shadow-2xl shadow-black/40">
            <div class="flex items-center gap-6 mb-10">
                <div
                    class="w-14 h-14 bg-emerald-500/10 rounded-2xl flex items-center justify-center border border-emerald-500/20">
                    <i class="fas fa-chart-line text-emerald-500 text-xl"></i>
                </div>
                <div>
                    <h3 class="text-xl font-black text-white tracking-tight uppercase">Expansion Matrix</h3>
                    <p class="text-gray-600 text-[10px] font-black uppercase tracking-[0.2em] mt-1">Acquisition and
                        Engagement Heuristics</p>
                </div>
            </div>
            <div class="h-80 w-full">
                <canvas id="userGrowthChart"></canvas>
            </div>
        </div>

        <!-- Logic Distribution -->
        <div
            class="stat-card p-10 rounded-[3.5rem] relative overflow-hidden shadow-2xl shadow-black/40 border-blue-500/5">
            <div class="flex items-center gap-6 mb-10">
                <div
                    class="w-14 h-14 bg-blue-500/10 rounded-2xl flex items-center justify-center border border-blue-500/20">
                    <i class="fas fa-diagram-project text-blue-500 text-xl"></i>
                </div>
                <div>
                    <h3 class="text-xl font-black text-white tracking-tight uppercase">Operational Spread</h3>
                    <p class="text-gray-600 text-[10px] font-black uppercase tracking-[0.2em] mt-1">Activity Logic
                        Distribution by Source</p>
                </div>
            </div>
            <div class="h-80 w-full relative">
                <canvas id="pointsDistributionChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Strategic Goal Mapping -->
    <div
        class="stat-card p-12 rounded-[3.5rem] relative overflow-hidden shadow-2xl shadow-black/40 border-purple-500/5">
        <div class="absolute -bottom-24 -right-24 w-80 h-80 bg-purple-500/5 blur-[120px] rounded-full -z-10"></div>
        <div class="flex items-center gap-6 mb-12">
            <div
                class="w-14 h-14 bg-purple-500/10 rounded-2xl flex items-center justify-center border border-purple-500/20">
                <i class="fas fa-bullseye text-purple-500 text-xl"></i>
            </div>
            <div>
                <h3 class="text-2xl font-black text-white tracking-tight uppercase">Objective Sync</h3>
                <p class="text-gray-600 text-[10px] font-black uppercase tracking-[0.2em] mt-1">Real-time progress
                    mapping against core objectives</p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Project Theta: Users -->
            <div
                class="p-8 bg-black/40 rounded-[2.5rem] border border-white/5 group hover:border-emerald-500/20 transition-all">
                <div class="flex items-center justify-between mb-6">
                    <h4 class="text-white font-black uppercase tracking-widest text-[11px]">System Expansion</h4>
                    <span class="text-emerald-500 font-black text-xs">78% SYNC</span>
                </div>
                <div class="space-y-4">
                    <div class="flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-600">
                        <span>L-01: 3,900</span>
                        <span>TARGET: 5,000</span>
                    </div>
                    <div class="w-full bg-white/5 rounded-full h-1.5 overflow-hidden">
                        <div class="bg-emerald-500 h-full rounded-full animate-pulse-slow"
                            style="width: 78%; box-shadow: 0 0 10px #10b981;"></div>
                    </div>
                </div>
                <div class="mt-6 flex items-center gap-3 text-gray-600">
                    <i class="fas fa-clock text-[10px]"></i>
                    <span class="text-[9px] font-black uppercase tracking-[0.2em]">7 Cycles Remaining</span>
                </div>
            </div>

            <!-- Project Delta: Ops Rate -->
            <div
                class="p-8 bg-black/40 rounded-[2.5rem] border border-white/5 group hover:border-blue-500/20 transition-all">
                <div class="flex items-center justify-between mb-6">
                    <h4 class="text-white font-black uppercase tracking-widest text-[11px]">Mission Frequency</h4>
                    <span class="text-blue-500 font-black text-xs">85% SYNC</span>
                </div>
                <div class="space-y-4">
                    <div class="flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-600">
                        <span>OPS: 850</span>
                        <span>TARGET: 1,000</span>
                    </div>
                    <div class="w-full bg-white/5 rounded-full h-1.5 overflow-hidden">
                        <div class="bg-blue-500 h-full rounded-full shadow-[0_0_10px_#3b82f6]" style="width: 85%"></div>
                    </div>
                </div>
                <div class="mt-6 flex items-center gap-3 text-blue-500">
                    <i class="fas fa-check-double text-[10px]"></i>
                    <span class="text-[9px] font-black uppercase tracking-[0.2em]">Operational Integrity Optimal</span>
                </div>
            </div>

            <!-- Project Sigma: CO2 -->
            <div
                class="p-8 bg-black/40 rounded-[2.5rem] border border-white/5 group hover:border-yellow-500/20 transition-all">
                <div class="flex items-center justify-between mb-6">
                    <h4 class="text-white font-black uppercase tracking-widest text-[11px]">Carbon Neutrality</h4>
                    <span class="text-yellow-500 font-black text-xs">92% SYNC</span>
                </div>
                <div class="space-y-4">
                    <div class="flex justify-between text-[10px] font-black uppercase tracking-widest text-gray-600">
                        <span>SAVED: 2.76T</span>
                        <span>TARGET: 3.0T</span>
                    </div>
                    <div class="w-full bg-white/5 rounded-full h-1.5 overflow-hidden">
                        <div class="bg-yellow-500 h-full rounded-full shadow-[0_0_10px_#fbbf24]" style="width: 92%">
                        </div>
                    </div>
                </div>
                <div class="mt-6 flex items-center gap-3 text-yellow-500">
                    <i class="fas fa-bolt text-[10px]"></i>
                    <span class="text-[9px] font-black uppercase tracking-[0.2em]">Exceeding Projection</span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .animate-pulse-slow {
        animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {

        0%,
        100% {
            opacity: 1;
        }

        50% {
            opacity: 0.7;
        }
    }
</style>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        Chart.defaults.color = '#4b5563';
        Chart.defaults.font.family = "'Plus Jakarta Sans', sans-serif";
        Chart.defaults.font.weight = 800;

        // User Growth Chart
        const userGrowthCtx = document.getElementById('userGrowthChart').getContext('2d');
        const growthGradient1 = userGrowthCtx.createLinearGradient(0, 0, 0, 400);
        growthGradient1.addColorStop(0, 'rgba(16, 185, 129, 0.2)');
        growthGradient1.addColorStop(1, 'rgba(16, 185, 129, 0)');

        const growthGradient2 = userGrowthCtx.createLinearGradient(0, 0, 0, 400);
        growthGradient2.addColorStop(0, 'rgba(59, 130, 246, 0.2)');
        growthGradient2.addColorStop(1, 'rgba(59, 130, 246, 0)');

        new Chart(userGrowthCtx, {
            type: 'line',
            data: {
                labels: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'],
                datasets: [{
                    label: 'CORE ACQUISITION',
                    data: [320, 450, 380, 520, 610, 580, 720, 650, 800, 750, 920, 850],
                    borderColor: '#10b981',
                    backgroundColor: growthGradient1,
                    borderWidth: 4,
                    fill: true,
                    tension: 0.5,
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: '#10b981',
                    pointHoverBorderColor: '#fff'
                }, {
                    label: 'ACTIVE SYNC',
                    data: [280, 420, 360, 480, 570, 540, 680, 620, 760, 710, 880, 820],
                    borderColor: '#3b82f6',
                    backgroundColor: growthGradient2,
                    borderWidth: 4,
                    fill: true,
                    tension: 0.5,
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: '#3b82f6',
                    pointHoverBorderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        align: 'end',
                        labels: { padding: 20, font: { size: 10 }, usePointStyle: true, boxWidth: 6 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: 'rgba(255, 255, 255, 0.03)' },
                        ticks: { font: { size: 9 } }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { font: { size: 9 } }
                    }
                }
            }
        });

        // Points Distribution Chart
        const pointsDistributionCtx = document.getElementById('pointsDistributionChart').getContext('2d');
        new Chart(pointsDistributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['MISSIONS', 'SYNCHRONIZATION', 'PROTOCOL REWARDS', 'REFERRALS', 'EVENTS'],
                datasets: [{
                    data: [45, 20, 15, 10, 10],
                    backgroundColor: [
                        '#10b981',
                        '#3b82f6',
                        '#fbbf24',
                        '#8b5cf6',
                        '#ef4444'
                    ],
                    borderWidth: 0,
                    hoverOffset: 30
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '85%',
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { padding: 30, font: { size: 9 }, usePointStyle: true, boxWidth: 6 }
                    }
                }
            }
        });

        // Numeric Animation Protocol
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);

                if (obj.id === 'total-users') {
                    obj.innerHTML = value.toLocaleString();
                } else if (obj.id === 'total-points') {
                    obj.innerHTML = (value / 1000000).toFixed(1) + 'M';
                } else if (obj.id === 'challenges-completed') {
                    obj.innerHTML = value.toLocaleString();
                } else if (obj.id === 'co2-saved') {
                    obj.innerHTML = (value / 1000).toFixed(1) + 'T';
                }

                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Initialize Sequences
        setTimeout(() => {
            animateValue(document.getElementById('total-users'), 0, 5247, 2500);
            animateValue(document.getElementById('total-points'), 0, 1200000, 2500);
            animateValue(document.getElementById('challenges-completed'), 0, 8456, 2500);
            animateValue(document.getElementById('co2-saved'), 0, 3200, 2500);
        }, 1000);
    });
</script>
{% endblock %}